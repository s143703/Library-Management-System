<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LMShelf | Questionnaire</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Minimal inline styles only for readability (allowed): keep look neat */
    .required-star { color: #f59e0b; }
  </style>
</head>
<body data-bs-theme="dark">

<nav class="navbar navbar-expand-lg navbar-dark bg-black border-bottom">
  <div class="container">
    <a class="navbar-brand" href="index.html"><img src="LMShelf.svg" width="120" alt="logo" class="me-2">LMShelf</a>

    <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
            <li class="nav-item"><a class="nav-link" href="catalog.html">Catalog</a></li>
            <li class="nav-item"><a class="nav-link" href="book-details.html">Book Details</a></li>
            <li class="nav-item"><a class="nav-link" href="reports.html">Reports</a></li>
            <li class="nav-item"><a class="nav-link" href="policies.html">Policies</a></li>
            <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
            <li class="nav-item"><a class="nav-link" href="account.html">My Account</a></li>
        </ul>

        <div class="ms-3">
          <button id="themeToggle" class="btn btn-outline-secondary btn-sm" type="button">ðŸŒ“</button>
        </div>
      </div>

  </div>
</nav>

<main class="container py-4">
  <h2>Questionnaire</h2>
  <p class="text-info">We'd love your feedback. Please complete the form.</p>

  <form id="qForm" novalidate>
    <!-- 1) Text input (name) -->
    <div class="mb-3">
      <label class="form-label">Full Name <span class="required-star">*</span></label>
      <input id="qName" type="text" class="form-control bg-secondary text-light" required>
      <div class="invalid-feedback">Please enter your name (at least 2 characters).</div>
    </div>

    <!-- 2) Email with advanced regex (not relying on browser's default) -->
    <div class="mb-3">
      <label class="form-label">Email <span class="required-star">*</span></label>
      <input id="qEmail" type="text" class="form-control bg-secondary text-light" required>
      <div class="invalid-feedback">Please enter a valid email address (e.g. s123456@student.squ.edu.om).</div>
    </div>

    <!-- 3) Phone with pattern (international friendly) -->
    <div class="mb-3">
      <label class="form-label">Phone (optional)</label>
      <input id="qPhone" type="text" class="form-control bg-secondary text-light" placeholder="+1234567890">
      <div class="invalid-feedback">If provided, phone must be in international format e.g. +96812345678</div>
    </div>

    <!-- 4) Radio buttons (satisfaction) -->
    <section class="mb-3">
      <legend class="col-form-label">How satisfied are you?</legend>
      <div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="satisfy" id="sat1" value="1" required>
          <label class="form-check-label" for="sat1">Not satisfied</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="satisfy" id="sat2" value="2">
          <label class="form-check-label" for="sat2">Neutral</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="satisfy" id="sat3" value="3">
          <label class="form-check-label" for="sat3">Very satisfied</label>
        </div>
      </div>
      <div class="invalid-feedback" id="satisfyFeedback" style="display:none;">Please select an option.</div>
    </section>

    <!-- 5) Checkboxes (services used) -->
    <div class="mb-3">
      <label class="form-label">Services you used (choose all that apply)</label>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="c1" value="search">
        <label class="form-check-label" for="c1">Catalog Search</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="c2" value="reservation">
        <label class="form-check-label" for="c2">Reservation</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="c3" value="borrow">
        <label class="form-check-label" for="c3">Borrowing</label>
      </div>
    </div>

    <!-- 6) Select -->
    <div class="mb-3">
      <label class="form-label">User Type</label>
      <select id="qType" class="form-select bg-secondary text-light">
        <option value="student">Student</option>
        <option value="faculty">Faculty</option>
        <option value="staff">Staff</option>
        <option value="other">Other</option>
      </select>
    </div>

    <!-- 7) Textarea with advanced validation: min length and disallowed words -->
    <div class="mb-3">
      <label class="form-label">Comments <span class="required-star">*</span></label>
      <textarea id="qComments" rows="5" class="form-control bg-secondary text-light" required></textarea>
      <div class="invalid-feedback">Please provide comments (at least 20 characters).</div>
    </div>

    <button class="btn btn-warning" type="submit">Submit Feedback</button>
  </form>

  <div id="qResult" class="mt-3"></div>
</main>




<!-- FOOTER -->
  <footer class="bg-black text-muted py-4 border-top">
    <div class="container">
      <div class="row gy-3">
        <div class="col-12 col-md-4">
          <h6 class="text-warning">LMShelf Library</h6>
          <p class="text-light small mb-0">Empowering readers through technology. Streamlining library management for everyone.</p>
        </div>

        <div class="col-6 col-md-4">
          <h6 class="text-warning">Quick Links</h6>
          <ul class="list-unstyled small">
            <li><a class="link-info text-decoration-none" href="catalog.html">Catalog</a></li>
            <li><a class="link-info text-decoration-none" href="reports.html">Reports</a></li>
            <li><a class="link-info text-decoration-none" href="policies.html">Policies</a></li>
          </ul>
        </div>

        <div class="col-6 col-md-4">
          <h6 class="text-warning">Contact</h6>
          <p class="text-light small mb-0">Email: <a class="link-info" href="mailto:library@lmshelf.edu">library@lmshelf.edu</a></p>
        </div>
      </div>
      
      <div class="text-center">
        <button onclick="window.scrollTo({ top: 0, behavior: 'smooth' });"  id="themeToggle" class="btn btn-outline-secondary btn-sm" type="button">Back to Top</button> <!-- Simple js code to scroll to the top -->
      </div>

      <div class="text-light text-center small mt-3">Â© 2025 LMShelf. All rights reserved.</div>
    </div>
  </footer>





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
/*
  questionnaire.js
  - Implements advanced form validation for the questionnaire form.
  - There are three different advanced validation rules:
    1) Email is validated with a regular expression (not relying on type="email").
    2) Phone, if provided, must match an international phone regex (optional field).
    3) Comments must be at least 20 chars and must not include disallowed words (example).
  - The code uses Bootstrap's validation classes to provide feedback.
*/

// Disallowed words (simple list for demo)
const disallowed = ['badword1','badword2'];

// Regex patterns
const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
// International-ish phone (very permissive but requires '+' and digits)
const phonePattern = /^\+[0-9]{7,15}$/;

document.getElementById('qForm').addEventListener('submit', function(e) {
  e.preventDefault(); // Prevents the default form submission , so it prevent refreshing the page to Process form data with JavaScript

  // Clear previous messages
  document.getElementById('qResult').innerHTML = '';

  // Gather fields
  const name = document.getElementById('qName').value.trim();
  const email = document.getElementById('qEmail').value.trim();
  const phone = document.getElementById('qPhone').value.trim();
  const comments = document.getElementById('qComments').value.trim();
  const satisfy = Array.from(document.getElementsByName('satisfy')).find(r => r.checked);
  // Validation flags
  let valid = true;

  // 1) Name validation: at least 2 characters
  if (name.length < 2) {
    valid = false;
    document.getElementById('qName').classList.add('is-invalid');
  } else {
    document.getElementById('qName').classList.remove('is-invalid');
    document.getElementById('qName').classList.add('is-valid');
  }

  // 2) Email validation using regex
  if (!emailPattern.test(email)) {
    valid = false;
    document.getElementById('qEmail').classList.add('is-invalid');
  } else {
    document.getElementById('qEmail').classList.remove('is-invalid');
    document.getElementById('qEmail').classList.add('is-valid');
  }

  // 3) Phone validation: optional, but if present must match pattern
  if (phone.length > 0) {
    if (!phonePattern.test(phone)) {
      valid = false;
      document.getElementById('qPhone').classList.add('is-invalid');
    } else {
      document.getElementById('qPhone').classList.remove('is-invalid');
      document.getElementById('qPhone').classList.add('is-valid');
    }
  } else {
    // clear validation for optional field
    document.getElementById('qPhone').classList.remove('is-invalid');
    document.getElementById('qPhone').classList.remove('is-valid');
  }

  // 4) Satisfaction radio validation
  if (!satisfy) {
    valid = false;
    document.getElementById('satisfyFeedback').style.display = 'block';
  } else {
    document.getElementById('satisfyFeedback').style.display = 'none';
  }

  // 5) Comments validation: at least 20 chars and not contain disallowed words
  const lowerComments = comments.toLowerCase();
  let containsBad = disallowed.some(w => lowerComments.includes(w));
  if (comments.length < 20 || containsBad) {
    valid = false;
    document.getElementById('qComments').classList.add('is-invalid');
  } else {
    document.getElementById('qComments').classList.remove('is-invalid');
    document.getElementById('qComments').classList.add('is-valid');
  }

  // If all valid, show a success message and summary (in real website, we'd send to the server)
  if (valid) {
    const userType = document.getElementById('qType').value;
    const services = [];
    if (document.getElementById('c1').checked) services.push('Catalog Search');
    if (document.getElementById('c2').checked) services.push('Reservation');
    if (document.getElementById('c3').checked) services.push('Borrowing');

    const summary = `
      <div class="alert alert-success" role="alert">
        Thank you, ${name}. Your feedback has been recorded (demo).
        <div class="mt-2"><strong>Summary:</strong>
          <ul>
            <li>Email: ${email}</li>
            <li>Phone: ${phone || 'â€”'}</li>
            <li>User Type: ${userType}</li>
            <li>Satisfaction: ${satisfy.value}</li>
            <li>Services used: ${services.join(', ') || 'None'}</li>
            <li>Comments: ${comments}</li>
          </ul>
        </div>
      </div>
    `;
    document.getElementById('qResult').innerHTML = summary;

    // Reset form states
    document.getElementById('qForm').reset();
    const validEls = document.querySelectorAll('.is-valid'); // Finding HTML Elements by CSS Selectors
    validEls.forEach(e => e.classList.remove('is-valid'));
  } else {
    // show error
    document.getElementById('qResult').innerHTML = '<div class="alert alert-danger">Please fix the highlighted errors and try again.</div>';
  }
});
</script>








  <!-- javascript code to changing page mode dark/light -->
  <script>
  // ------------------------------
  // THEME TOGGLE 
  // ------------------------------
  document.addEventListener("DOMContentLoaded", function () {
      
      // 1. Load saved theme from localStorage
      let savedTheme = localStorage.getItem("theme") || "dark";
      document.body.setAttribute("data-bs-theme", savedTheme);

      // 2. Find toggle button
      const toggleBtn = document.getElementById("themeToggle");
      if (!toggleBtn) return;

      // 3. When user clicks toggle button
      toggleBtn.addEventListener("click", function () {
          let current = document.body.getAttribute("data-bs-theme");
          let next = current === "dark" ? "light" : "dark";

          // Apply theme
          document.body.setAttribute("data-bs-theme", next);

          // Save theme across pages
          localStorage.setItem("theme", next);
      });
  });
  </script>







</body>
</html>
